---
## Author
author:
  name: Мацюк Константин Владимирович
  degrees: DSc
  orcid: 1032253640
  email: 1032253640@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: "Лабораторная работа №5"
subtitle: "Основы работы с Midnight Commander (mc). Структура программы на языке ассемблера NASM. Системные вызовы в ОС GNU Linux"
license: "CC BY"
---

# Цель работы

Приобретение практических навыков работы в Midnight Commander. Освоение инструкций языка ассемблера mov и int.

# Выполнение лабораторной работы

1. Открыл Midnight Commander (@fig-001)

![](image/1.png){#fig-001 width=70%}

2. Перешел в каталог ~/work/arch-pc, созданный
при выполнении лабораторной работы №4 (@fig-002)

![](image/2.png){#fig-002 width=70%}

3. С помощью клавиши F7 создал папку lab05 и перешел в созданный каталог (@fig-003)

![](image/3.png){#fig-003 width=70%}

4. Пользуясь строкой ввода и командой touch, создал файл lab5-1.asm (@fig-004)

![](image/4.png){#fig-004 width=70%}

5. С помощью функциональной клавиши F4 открыл файл lab5-1.asm для редактирования во встроенном редакторе (@fig-005)

![](image/5.png){#fig-005 width=70%}

6. Ввел текст программы из листинга 5.1, сохранил изменения и закрыл файл (@fig-006)

![](image/6.png){#fig-006 width=70%}

7. Убедился, что файл содержит текст программы (@fig-007)

![](image/7.png){#fig-007 width=70%}

8. Оттранслировал текст программы lab5-1.asm в объектный файл. Выполнил компоновку объектного файла и запустил получившийся исполняемый файл (@fig-008)

![](image/8.png){#fig-008 width=70%}

## Подключение внешнего файла in_out.asm

9. Скачал файл in_out.asm со страницы курса в ТУИС и переместил его в каталог программы (@fig-009 width=70)

![](image/9.png){#fig-009 width=70%}

10. С помощью функциональной клавиши F5 создал копию файла lab5-1.asm с именем lab5-2.asm (@fig-010)

![](image/10.png){#fig-010 width=70%}

11. Исправил текст программы в файле lab5-2.asm с использованием подпрограмм из
внешнего файла in_out.asm в соответствии с листингом 5.2 (@fig-011 width=80%). Создал исполняемый файл и проверил его работу (@fig-012 width=80%)

![](image/11.png){#fig-011 width=70%}

![](image/12.png){#fig-012 width=70%}

12. В файле lab5-2.asm заменил подпрограмму sprintLF на sprint. Создал исполняемый файл и проверил его работу (@fig-013). Теперь при выводе строки каретка не переносится на новую строчку.

![](image/13.png){#fig-013 width=70%}

# Задания для самостоятельного выполнения

1. Создал копию файла lab5-1.asm. Внес изменения в программу, так чтобы она работала по следующему алгоритму:
• вывести приглашение типа “Введите строку:”;
• ввести строку с клавиатуры;
• вывести введённую строку на экран (@fig-014)

![](image/14.png){#fig-014 width=70%}

2. Получил исполняемый файл и проверил его работу (@fig-015)

![](image/15.png){#fig-015 width=70%}

3. Создал копию файла lab5-2.asm. Исправил текст программы с использование подпрограмм из внешнего файла in_out.asm, так чтобы он работала по аналогичному
алгоритму (@fig-016)

![](image/16.png){#fig-016 width=70%}

4. Создал исполняемый файл и проверил его работу (@fig-017)

![](image/17.png){#fig-017 width=70%}

# Выводы

Приобретел практические навыки работы в Midnight Commander. Освоил инструкции языка ассемблера mov и int.

# Листинги написанных программ:

lab5-1.asm:

``` assembler
SECTION .data
msg: DB 'Введите строку',10

msgLen: EQU $-msg

SECTION .bss
buf1: RESB 80

SECTION .text
GLOBAL _start
 _start:

mov eax,4
mov ebx,1
mov ecx,msg
mov edx,msgLen
int 80h

mov eax, 3
mov ebx, 0
mov ecx, buf1
mov edx, 80
int 80h

mov eax,1
mov ebx,0
int 80h

```

lab5-2.asm:

``` assembler
%include 'in_out.asm'

SECTION .data
msg: DB 'Введите строку',0h

SECTION .bss
buf1: RESB 80

SECTION .text
GLOBAL _start
 _start:

mov eax, msg
call sprint

mov ecx, buf1
mov edx, 80

call sread

call quit

```

lab5-3.asm:

``` assembler
SECTION .data
msg: DB 'Введите строку',10

msgLen: EQU $-msg

SECTION .bss
buf1: RESB 80

SECTION .text
GLOBAL _start
 _start:

mov eax,4
mov ebx,1
mov ecx,msg
mov edx,msgLen
int 80h

mov eax, 3
mov ebx, 0
mov ecx, buf1
mov edx, 80
int 80h

mov eax,4
mov ebx,1
mov ecx,buf1
mov edx,80
int 80h

mov eax,1
mov ebx,0
int 80h
```

lab5-4.asm:

``` assembler
%include 'in_out.asm'

SECTION .data
msg: DB 'Введите строку',0h

SECTION .bss
buf1: RESB 80

SECTION .text
GLOBAL _start
 _start:

mov eax, msg
call sprint

mov ecx, buf1
mov edx, 80

call sread

mov eax, buf1
call sprint

call quit

```


# Список литературы{.unnumbered}

::: {#refs}
:::
